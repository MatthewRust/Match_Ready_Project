<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'base.css' %}?v=1.1"> <!-- Cache busting -->
    <title>{% block title_block %}MatchReady{% endblock %}</title>
</head>
<body>
    <div class="container">
        <div id="header">
            <!-- Simple text title, replace with logo if available -->
            <h1><a href="{% url 'Match_Ready:index' %}">MatchReady</a></h1>
            <span class="user-info">
                {% if user.is_authenticated %}
                    Welcome, {{ user.username }} ({{ user_role|capfirst }})
                {% else %}
                    Welcome, Guest
                {% endif %}
            </span>
        </div>

        <div id="navbar">
            <ul id="nav-list">
                <li><a href="{% url 'Match_Ready:index' %}">Home</a></li>
                <li><a href="{% url 'Match_Ready:about' %}">About</a></li>
                <li><a href="{% url 'Match_Ready:fixtures' %}">Fixtures</a></li>
                <li><a href="{% url 'Match_Ready:contact' %}">Contact Us</a></li>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'Match_Ready:logout' %}">Logout</a></li>
                {% else %}
                    <li><a href="{% url 'Match_Ready:login' %}">Login</a></li>
                    <li><a href="{% url 'Match_Ready:signup' %}">Sign Up</a></li>
                {% endif %}
            </ul>
        </div>

        <div id="content-area">
            {% if user.is_authenticated %}
            <div id="sidebar">
                <h2>Navigation</h2>
                <ul id="sidebar-list">
                    {% if user_role == 'player' or user_role == 'coach' or user_role == 'fan' %}
                        <li><a href="{% url 'Match_Ready:my_team' %}">My Team</a></li>
                    {% endif %}

                    {% if user_role == 'player' or user_role == 'fan' %}
                        <li><a href="{% url 'Match_Ready:find_team' %}">Find New Team</a></li>
                    {% endif %}

                    {% if is_coach %} {# Use boolean from context processor #}
                        <li><a href="{% url 'Match_Ready:create_team' %}">Create Team</a></li>
                        <li><a href="{% url 'Match_Ready:add_match' %}">Add Match</a></li>
                        {# Add links to manage current team if they have one #}
                        {% if team_id_for_links %}
                            <li><a href="{% url 'Match_Ready:announcements' team_id_for_links %}">Team Announcements</a></li>
                            <li><a href="{% url 'Match_Ready:team_sheets' team_id_for_links %}">Team Sheets</a></li>
                        {% endif %}
                    {% endif %}

                     {# Links visible to team members (Player/Coach) #}
                     {% if user_role == 'player' and team_id_for_links %}
                        <li><a href="{% url 'Match_Ready:announcements' team_id_for_links %}">Team Announcements</a></li>
                        <li><a href="{% url 'Match_Ready:team_sheets' team_id_for_links %}">Team Sheets</a></li>
                     {% endif %}
                </ul>
            </div>
            {% endif %}

            <div id="main-content" class="{% if not user.is_authenticated %}no-sidebar{% endif %}">
                {# Display Django messages #}
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <div id="main">
                    {% block body_block %}
                        {# Default content if block is empty #}
                        <p>This is the default content area.</p>
                    {% endblock %}
                </div>
            </div>
        </div>

        <div id="footer">
            <div id="contact-info">
                <h3>Contact Info</h3>
                <p>Email: <a href="mailto:support@matchready.com">support@matchready.com</a></p>
                <p>Phone: +44 7951 278577</p>
            </div>
            <div id="external-links">
                <h3>External Links</h3>
                <ul>
                    <li><a href="https://www.bbc.co.uk/sport" target="_blank" rel="noopener noreferrer">BBC Sport</a></li>
                    <!-- Add more relevant links -->
                </ul>
            </div>
             <div id="copyright">
                <p>Â© {% now "Y" %} MatchReady. All rights reserved.</p>
            </div>
        </div>
    </div> {# End container #}
</body>
</html>